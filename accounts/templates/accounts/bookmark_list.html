{# bookmark_list.html #}
{# 관심 상품 조회 화면 템플릿 #}

{% extends 'base.html' %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'accounts/css/bookmark-list.css' %}">
{% endblock styles %}

{% block content %}
<div class="content-wrapper">
  {# 상단바 #}
  <header class="header">
    <div class="left-group">
      {# 로고 이미지 #}
      <a href="{% url 'products:index' %}" class="main-link">
        <img src="{% static 'images/logo-gray.png' %}" alt="FINBOT Logo">
      </a>
    </div>

    <div class="right-group">
      <a href="{% url 'accounts:update' %}" class="info-btn">회원 정보</a>
      <a href="{% url 'accounts:logout' %}" class="logout-btn">로그아웃</a>
    </div>
  </header>

  <div class="bookmark-container">
    <h2 class="bookmark-title">
      {{ request.user.name }}님의 <span class="highlight-title">관심 상품 목록</span>
    </h2>

    <div class="product-container">
      {% if page_obj %}
        {% for product in page_obj %}
          <div class="bookmark-item">
            <p class="product-name">{{ product.fin_prdt_nm }}</p>
            <p style="font-weight: bold">{{ product.kor_co_nm }}</p>
            <p>{{ product.description }}</p>
          </div>
        {% endfor %}

        <div class="pagination">
          {# 이전 페이지 #}
          {% if show_previous_5 %}
            <a href="?query={{ query }}&page={{ previous_page }}">이전</a>
          {% endif %}

          {# 페이지 번호 그룹 표시 (1부터 5까지) #}
          {% for num in page_obj.paginator.page_range %}
          {% if num >= start_page and num <= end_page %}
          {% if num == page_obj.number %}
          <span>{{ num }}</span>
          {% else %}
            <a href="?query={{ query }}&page={{ num }}">{{ num }}</a>
          {% endif %}
          {% endif %}
          {% endfor %}

          {# 다음 페이지 #}
          {% if show_next_5 %}
            <a href="?query={{ query }}&page={{ next_page }}">다음</a>
          {% endif %}
        </div>
      {% else %}
        <p class="no-item">아직 등록한 관심 상품이 없습니다.
        마음에 드는 상품을 추가해 보세요.</p>
      {% endif %}
    </div>
  </div>

  {# 채팅 페이지 버튼 #}
  <a href="{% url 'chat:current_chat' %}" class="chatbot-btn">
    <img src="{% static 'images/finbot-btn-long.png' %}" alt="FINBOT Chat">
  </a>
</div>
{% endblock content %}